import{u as B,r as v,w as R,c as _,a as q,o as w,b as s,d as l,e as c,f as d,g as k,l as x,h as t,i as I,E as b,j as N}from"./index-_b0YwpYL.js";import{E as z,a as F}from"./el-col-8OI6pUXY.js";import{E as M}from"./el-checkbox-DNv9-jKF.js";import{E as P,a as T}from"./el-form-item-BzrzQ6EJ.js";import{E as j}from"./el-link-Da2NjdHj.js";import{_ as A,E as D}from"./_plugin-vue_export-helper-D2bKE1DW.js";import{E as G}from"./el-input-DEeDvsy5.js";import"./el-message-CbAn_9g2.js";import"./isEqual-BdCkxPGZ.js";const H={class:"flex"},J={__name:"LoginPage",setup(K){const U=q(),m=B(),u=v(!1),o=v({username:m.lastUser||"",password:"",repassword:""});console.log(o.value.username+"hh");const i=v(),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5~10位字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6~15位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是6~15位的非空字符",trigger:"blur"},{validator:(f,e,n)=>{e!==o.value.password?n(new Error("两次输入的密码不一致")):n()},trigger:"blur"}]},C=async()=>{await i.value.validate(),await I(o.value),b.success("注册成功"),u.value=!1};R(u,()=>{o.value.username="",o.value.password="",o.value.repassword=""});const S=async()=>{await i.value.validate();const f=await N(o.value);m.setToken(f.data.token),m.getLastUser(o.value.username),b.success("登录成功"),U.push("/")};return(f,e)=>{const n=z,a=T,p=G,y=D,g=j,E=P,L=M,$=F;return w(),_($,{class:"login-page"},{default:s(()=>[l(n,{span:12,class:"bg"}),l(n,{span:6,offset:3,class:"form"},{default:s(()=>[u.value?(w(),_(E,{key:0,model:o.value,rules:V,ref_key:"form",ref:i,size:"large",autocomplete:"off"},{default:s(()=>[l(a,null,{default:s(()=>e[8]||(e[8]=[c("h1",null,"注册",-1)])),_:1}),l(a,{prop:"username"},{default:s(()=>[l(p,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.username=r),"prefix-icon":d(k),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a,{prop:"password"},{default:s(()=>[l(p,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r),"prefix-icon":d(x),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a,{prop:"repassword"},{default:s(()=>[l(p,{modelValue:o.value.repassword,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.repassword=r),"prefix-icon":d(x),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a,null,{default:s(()=>[l(y,{onClick:e[3]||(e[3]=r=>C()),class:"button",type:"primary","auto-insert-space":""},{default:s(()=>e[9]||(e[9]=[t(" 注册 ")])),_:1})]),_:1}),l(a,{class:"flex"},{default:s(()=>[l(g,{type:"info",underline:!1,onClick:e[4]||(e[4]=r=>u.value=!1)},{default:s(()=>e[10]||(e[10]=[t(" ← 返回 ")])),_:1})]),_:1})]),_:1},8,["model"])):(w(),_(E,{key:1,model:o.value,rules:V,ref_key:"form",ref:i,size:"large",autocomplete:"off"},{default:s(()=>[l(a,null,{default:s(()=>e[11]||(e[11]=[c("h1",null,"登录",-1)])),_:1}),l(a,{prop:"username"},{default:s(()=>[l(p,{modelValue:o.value.username,"onUpdate:modelValue":e[5]||(e[5]=r=>o.value.username=r),"prefix-icon":d(k),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a,{prop:"password"},{default:s(()=>[l(p,{modelValue:o.value.password,"onUpdate:modelValue":e[6]||(e[6]=r=>o.value.password=r),name:"password","prefix-icon":d(x),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(a,{class:"flex"},{default:s(()=>[c("div",H,[l(L,null,{default:s(()=>e[12]||(e[12]=[t("记住我")])),_:1}),l(g,{type:"primary",underline:!1},{default:s(()=>e[13]||(e[13]=[t("忘记密码？")])),_:1})])]),_:1}),l(a,null,{default:s(()=>[l(y,{onClick:S,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>e[14]||(e[14]=[t("登录")])),_:1})]),_:1}),l(a,{class:"flex"},{default:s(()=>[l(g,{type:"info",underline:!1,onClick:e[7]||(e[7]=r=>u.value=!0)},{default:s(()=>e[15]||(e[15]=[t(" 注册 → ")])),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},se=A(J,[["__scopeId","data-v-7cff8a47"]]);export{se as default};
