import{u as y,r as i,c as p,b as a,o,d as s,e as U,z as g,D as E,f as r,aS as d,h as _,bO as b,bP as w,E as S}from"./index-_b0YwpYL.js";import{_ as x,E as A}from"./_plugin-vue_export-helper-D2bKE1DW.js";import{E as B}from"./el-progress-jmvKn4Ad.js";import{_ as R}from"./PageContainer-B5wyqILh.js";import"./el-message-CbAn_9g2.js";import"./isEqual-BdCkxPGZ.js";const z=["src"],C={__name:"UserAvatar",setup(N){const l=y(),t=i(l.user.user_pic),n=i(),f=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{t.value=e.result}},m=async()=>{await w(t.value),await l.getUser(),S.success("头像更新成功")};return(c,e)=>{const v=E,k=B,u=A;return o(),p(R,{title:"更换头像"},{default:a(()=>[s(k,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","show-file-list":!1,"on-change":f},{default:a(()=>[t.value?(o(),g("img",{key:0,src:t.value,class:"avatar"},null,8,z)):(o(),p(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[s(r(d))]),_:1}))]),_:1},512),e[3]||(e[3]=U("br",null,null,-1)),s(u,{onClick:e[0]||(e[0]=V=>n.value.$el.querySelector("input").click()),type:"primary",icon:r(d),size:"large"},{default:a(()=>e[1]||(e[1]=[_("选择头像")])),_:1},8,["icon"]),s(u,{onClick:m,type:"success",icon:r(b),size:"large"},{default:a(()=>e[2]||(e[2]=[_("上传头像")])),_:1},8,["icon"])]),_:1})}}},M=x(C,[["__scopeId","data-v-c6ab4325"]]);export{M as default};
